!function(){"use strict";var e,t,n,r={},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i.m=r,i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,n){return i.f[n](e,t),t}),[]))},i.u=function(e){return({16:"mustacheEngine",124:"handlebarsEngine"}[e]||e)+".js"},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="@netshoes/ff-webstore-ads:",i.l=function(n,r,o,s){if(e[n])e[n].push(r);else{var a,c;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var l=d[u];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+o){a=l;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+o),a.src=n),e[n]=[r];var f=function(t,r){a.onerror=a.onload=null,clearTimeout(v);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(r)})),t)return t(r)},v=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="https://static.netshoes.com.br/sponsored-products-sdk/2.16.6-0/",function(){var e={996:0};i.f.j=function(t,n){var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,o){r=e[t]=[n,o]}));n.push(r[2]=o);var s=i.p+i.u(t),a=new Error;i.l(s,(function(n){if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+t,t)}};var t=function(t,n){var r,o,s=n[0],a=n[1],c=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);c&&c(i)}for(t&&t(n);d<s.length;d++)o=s[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunk_netshoes_ff_webstore_ads=self.webpackChunk_netshoes_ff_webstore_ads||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(e){e.VIEW="ads-view-event",e.CLICK="ads-click-event",e.IMPRESSION="ads-impression-event",e.DISABLE_EVENT="ads-disable-event",e.DISABLE_PREVENT="ads-disable-prevent"}(n||(n={}));var s,a,c,d=new class{observe(e,t){e.addEventListener("mousedown",t)}observeClick(e,t){e.addEventListener("click",t)}getTargets(e){return e.hasAttribute(n.CLICK)?[e]:Array.from(e.querySelectorAll(`[${n.CLICK}]`)||[])}},u=new class{constructor(){this.observers=[]}notify(e){this.observers.forEach((t=>{try{t(e)}catch(e){console.error("MagaluAds::ViewObserver",e)}}))}subscribe(e){this.observers.push(e)}},l=new class{constructor(){this.observers=[]}notify(e){this.observers.forEach((t=>{try{t(e)}catch(e){console.error("MagaluAds::ErrorObserver",e)}}))}subscribe(e){this.observers.push(e)}};!function(e){e.INIT="INIT",e.GET_ADS="GET_ADS",e.GET_CONFIG="GET_CONFIG",e.EVENTS="EVENTS",e.FILLRATE="FILLRATE",e.RENDER="RENDER"}(s||(s={})),function(e){e.TARGET_NOT_FOUND="target.not.found",e.ERROR_ON_REQUEST="error.on.request"}(a||(a={})),function(e){e.NONE="NONE",e.API="API",e.CONSOLE="CONSOLE"}(c||(c={}));const f=(e,t={})=>{return n=void 0,r=void 0,i=function*(){const n=Object.assign({},t);t.body&&(n.body=JSON.stringify(t.body));const r=yield fetch(e,n);if(r.status<200||r.status>299)throw{message:a.ERROR_ON_REQUEST,response:r};return r},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,a)}c((i=i.apply(n,r||[])).next())}));var n,r,o,i};var v,h;!function(e){e.SDK="magalu.ads.ready",e.SDK_COLLECTOR="magalu.ads.collector.ready",e.SDK_EVENTS="magalu.ads.events.ready"}(v||(v={})),function(e){e.VIEW="VIEW",e.IMPRESSION="IMPRESSION",e.CLICK="CLICK"}(h||(h={}));const p=(e,t=!0)=>{try{const n=null==e?void 0:e.match(/(\d{5})-?(\d{3})/i);return n&&n.length>2?t?`${n[1]}-${n[2]}`:`${n[1]}${n[2]}`:""}catch(e){return""}};var g=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const y=e=>g(void 0,void 0,void 0,(function*(){var t,n,r,o,i,s,a;const c={sdkType:"WEB",publisherId:(null===(t=e.sdkContext)||void 0===t?void 0:t.publisherId)||"not_present"};var d;return c.placement=(null===(n=e.sdkContext)||void 0===n?void 0:n.placement)||(null===(r=e.placement)||void 0===r?void 0:r.name)||void 0,c.page=(null===(o=e.sdkContext)||void 0===o?void 0:o.page)||void 0,c.channel=null===(i=e.sdkContext)||void 0===i?void 0:i.channel,c.pageUri=(null===(s=e.sdkContext)||void 0===s?void 0:s.pageUri)||void 0,c.searchTerm=(null===(a=e.sdkContext)||void 0===a?void 0:a.searchTerm)||void 0,c.user=(e=>{var t,n,r,o;const i={};return i.id=(null===(t=e.sdkContext)||void 0===t?void 0:t.userId)||void 0,i.navigationId=(null===(n=e.sdkContext)||void 0===n?void 0:n.navigationId)||(null===(r=e.sdkContext)||void 0===r?void 0:r.userTrackId)||void 0,i.zipcode=(null===(o=e.sdkContext)||void 0===o?void 0:o.zipcode)||void 0,i})(e),c.ads=(d=e.ad,e.ads||(d?[d]:[])),c.errorDetail=yield(e=>g(void 0,void 0,void 0,(function*(){const t={originAction:e.originAction};return t.stackTrace=yield(e=>g(void 0,void 0,void 0,(function*(){var t;const n=yield(e=>g(void 0,void 0,void 0,(function*(){var t;const n={};try{e&&(n.message=e.message||"not_present",n.name=e.name||"not_present",n.stack=e.stack||"not_present",(null===(t=e.response)||void 0===t?void 0:t.json)&&(n.json=yield e.response.json()))}catch(e){n.exception="Something went wrong while normalize error"}return n})))(e.error),r={sdkVersion:"2.16.6-0",href:(null===(t=window.location)||void 0===t?void 0:t.href)?window.location.href:"not_present",details:e.details,userAgent:(null===navigator||void 0===navigator?void 0:navigator.userAgent)?navigator.userAgent:"not_present",error:n,sdkContext:e.sdkContext};return JSON.stringify(r)})))(e),t.errorMessage=e.errorMessage,t})))(e),c})),b=e=>g(void 0,void 0,void 0,(function*(){try{const t=yield y(e);switch("API"){case c.API:(e=>{g(void 0,void 0,void 0,(function*(){const t={method:"POST",body:e,headers:{"Content-type":"application/json"}};yield f("https://ads-collector.luizalabs.com/api/v1/errors",t)}))})(t);break;case c.CONSOLE:console.error(t)}}catch(e){console.error(e)}}));var E;!function(e){e.CLICK="/api/v1/metric/click",e.IMPRESSION="/api/v1/metric/impression",e.VIEW="/api/v1/metric/view"}(E||(E={}));const I=(e,t,n,r)=>{return o=void 0,i=void 0,c=function*(){try{const o=(e=>{switch(e){case h.CLICK:return E.CLICK;case h.IMPRESSION:return E.IMPRESSION;case h.VIEW:return E.VIEW;default:return"/"}})(n),i=`https://ads-collector.luizalabs.com${o}`,s=((e,t,n,r)=>{const o={adId:n.adId,campaignId:n.campaignId,sku:n.sku,sellerId:n.sellerId,category:n.category,subCategory:n.subCategory,brand:n.brand,gender:n.gender||""};let i={adRequestId:n.adRequestId,adResponseId:n.adResponseId,adType:null==n?void 0:n.type,publisherId:null==n?void 0:n.publisherId,channel:t.channel,page:t.page,placement:t.placement||r.name,user:{id:t.userId,navigationId:t.navigationId||t.userTrackId||t.userId,zipcode:p(t.zipcode)}};return e===h.CLICK?i=Object.assign(Object.assign({},i),o):i.ads=[o],i})(n,e,t,r),a={method:"POST",body:s,headers:{"Content-type":"application/json"}};yield f(i,a)}catch(o){b({errorMessage:"sendEvent",originAction:n||s.EVENTS,placement:r,ad:t,sdkContext:e,error:o}),l.notify({error:o})}},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{s(c.next(e))}catch(e){t(e)}}function r(e){try{s(c.throw(e))}catch(e){t(e)}}function s(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(n,r)}s((c=c.apply(o,i||[])).next())}));var o,i,a,c};var m,A,w,C,S,O,R=new class{execute(e,t,n,r){return o=this,i=void 0,a=function*(){u.notify({ad:n,placement:r,target:t}),I(e,n,h.VIEW,r)},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function r(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(n,r)}c((a=a.apply(o,i||[])).next())}));var o,i,s,a}getAdFromAttributeId(e,t){const r=e.getAttribute(n.VIEW);return t.find((e=>{var t;return(null===(t=e.adId)||void 0===t?void 0:t.toString())==r}))}getAdFromDataAttribute(e){const t=e.getAttribute(n.VIEW);return JSON.parse(t||"")}},T=new class{constructor(){this.observers=[]}notify(e){this.observers.forEach((t=>{try{t(e)}catch(e){console.error("MagaluAds::ClickObserver",e)}}))}subscribe(e){this.observers.push(e)}},P=new class{execute(e,t,n,r){return o=this,i=void 0,a=function*(){T.notify({ad:n,placement:r,target:t.currentTarget,clickElementTarget:t.target,event:t}),I(e,n,h.CLICK,r)},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function r(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(n,r)}c((a=a.apply(o,i||[])).next())}));var o,i,s,a}getAdFromAttributeId(e,t){const r=e.getAttribute(n.CLICK);return t.find((e=>{var t;return(null===(t=e.adId)||void 0===t?void 0:t.toString())==r}))}getAdFromDataAttribute(e){const t=e.getAttribute(n.CLICK);return JSON.parse(t||"")}};!function(e){e.SPONSORED_PRODUCT="SPONSORED_PRODUCT",e.SPONSORED_BANNER="SPONSORED_BANNER"}(m||(m={})),function(e){e.BEFORE_BEGIN="beforebegin",e.AFTER_BEGIN="afterbegin",e.BEFORE_END="beforeend",e.AFTER_END="afterend"}(A||(A={})),function(e){e.MUSTACHE="mustache",e.HANDLEBARS="handlebars"}(w||(w={})),function(e){e.MSITE="MSITE",e.WEB="WEB",e.APP_IOS="APP_IOS",e.APP_ANDROID="APP_ANDROID"}(C||(C={})),function(e){e.HOME="HOME",e.CART="CART",e.SEARCH="SEARCH",e.CATEGORY="CATEGORY",e.SHOWCASE="SHOWCASE"}(S||(S={})),function(e){e.HOME="HOME",e.CART="CART",e.SEARCH="SEARCH",e.CATEGORY="CATEGORY"}(O||(O={}));var _=new class{getEngine(e){return t=this,n=void 0,o=function*(){if(e===w.MUSTACHE){const{default:e}=yield i.e(16).then(i.bind(i,226));return e}if(e===w.HANDLEBARS){const{default:e}=yield Promise.all([i.e(750),i.e(124)]).then(i.bind(i,484));return e}throw new Error("Error on factory renderEngine")},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}c((o=o.apply(t,n||[])).next())}));var t,n,r,o}},N=new class{constructor(){this.observers=[]}notify(e){this.observers.forEach((t=>{try{t(e)}catch(e){console.error("MagaluAds::ImpressionObserver",e)}}))}subscribe(e){this.observers.push(e)}},x=new class{execute(e,t,n,r){return o=this,i=void 0,a=function*(){N.notify({ad:n,target:t}),I(e,n,h.IMPRESSION,r)},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function r(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(n,r)}c((a=a.apply(o,i||[])).next())}));var o,i,s,a}getTargets(e){return e.getAttribute(n.IMPRESSION)?[e]:Array.from(e.querySelectorAll(`[${n.IMPRESSION}]`))}getAdFromAttributeId(e,t){const r=e.getAttribute(n.IMPRESSION);return t.find((e=>{var t;return(null===(t=e.adId)||void 0===t?void 0:t.toString())==r}))}getAdFromDataAttribute(e){const t=e.getAttribute(n.IMPRESSION);return JSON.parse(t||"")}};class k{constructor(){this.timeout=1e3}start(e){this.timerId=setTimeout((()=>{e(),this.timerId=null}),this.timeout)}stop(){clearTimeout(this.timerId),this.timerId=null}}class D{constructor(){this.timer=new k,this.ADS_VIEW_PERCENT=.5}observe(e,t){const n=new IntersectionObserver((e=>{e.forEach((e=>{return n=this,r=void 0,i=function*(){e.isIntersecting?this.timer.start((()=>t(e))):this.timer.stop()},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,a)}c((i=i.apply(n,r||[])).next())}));var n,r,o,i}))}),{root:null,threshold:this.ADS_VIEW_PERCENT});return n.observe(e),n}getTargets(e){return e.hasAttribute(n.VIEW)?[e]:Array.from(e.querySelectorAll(`[${n.VIEW}]`)||[])}}var M=new D;const L=e=>{const t=new URLSearchParams;for(const n in e){const r=e[n];r&&t.append(n,r.toString())}return t.toString()};var j;!function(e){e.LOCAL="local",e.HMG="hmg",e.PRD="prd",e.TEST="test"}(j||(j={}));var F=new class{constructor(){this.observers=[]}notify(e){this.observers.forEach((t=>{try{t(e)}catch(e){console.error("MagaluAds::AfterInsertSlot",e)}}))}subscribe(e){this.observers.push(e)}},V=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const K=new class{execute(e,t,n){return V(this,void 0,void 0,(function*(){((e,t)=>{const n=[],r=[...e];return t.forEach((e=>{const t=(e=>e.map(((e,t)=>Object.assign(Object.assign({},e),{index:t}))))(r.splice(0,e.numberOfAds));n.push({placement:e,placementAds:t})})),n})(t,n).forEach((({placement:t,placementAds:n})=>V(this,void 0,void 0,(function*(){const r=document.querySelector(t.elementQuery||"");if(r&&n.length>0){const s=yield(u=t.template,o=void 0,i=void 0,c=void 0,d=function*(){try{if(window.ADS_TEMPLATE_MOCK&&"prd"!==j.PRD)return window.ADS_TEMPLATE_MOCK;const e=yield f(("prd"===j.PRD?null:window.ADS_TEMPLATE_PATH?window.ADS_TEMPLATE_PATH:window.location.href.search(/adsDebug/)>-1?(e=>{const t=e.indexOf("?"),n={};return t<0||e.slice(e.indexOf("?")+1).split("&").map((e=>{const[t,r]=e.split("=");n[t]=decodeURIComponent(r)})),n})(window.location.href).adsDebug:null)||u);return yield e.text()}catch(e){return l.notify({error:e}),""}},new(c||(c=Promise))((function(e,t){function n(e){try{s(d.next(e))}catch(e){t(e)}}function r(e){try{s(d.throw(e))}catch(e){t(e)}}function s(t){var o;t.done?e(t.value):(o=t.value,o instanceof c?o:new c((function(e){e(o)}))).then(n,r)}s((d=d.apply(o,i||[])).next())}))),a=yield _.getEngine(t.engine);let v;(yield a.renderAds(n,s,t.context)).forEach((o=>{this.sendImpressionsEvent(o,n,e,t),this.initObservers(e,o,n,t),v?v.insertAdjacentElement(A.AFTER_END,o):r.insertAdjacentElement(t.position,o),v=o,F.notify({placement:t,target:o,ads:n})}))}else if(!r&&n.length>0){const n={message:a.TARGET_NOT_FOUND,stack:t};b({errorMessage:"RenderFlow:execute",originAction:s.RENDER,sdkContext:e,error:n}),l.notify({error:n})}var o,i,c,d,u}))))}))}sendImpressionsEvent(e,t,n,r){x.getTargets(e).forEach((e=>{const o=x.getAdFromAttributeId(e,t);x.execute(n,e,o,r)}))}initObservers(e,t,r,o){M.getTargets(t).forEach((t=>{const n=(new D).observe(t,(t=>{const i=R.getAdFromAttributeId(t.target,r);R.execute(e,t.target,i,o),n.unobserve(t.target)}))}));const i=d.getTargets(t),s=t=>{const i=void 0!==t.buttons&&t.buttons<2;if(!t.target.hasAttribute(n.DISABLE_EVENT)){const s=t.currentTarget.hasAttribute(n.DISABLE_PREVENT),a=P.getAdFromAttributeId(t.currentTarget,r);if(P.execute(e,t,a,o),!s&&i){const e=t.currentTarget.getAttribute("redirect");e&&setTimeout((()=>{window.location.href=e}),800)}}},a=e=>{const t=e.target.hasAttribute(n.DISABLE_PREVENT),r=e.target.hasAttribute(n.DISABLE_EVENT);t||r||e.preventDefault()};i.forEach((e=>{d.observeClick(e,a),d.observe(e,s)}))}};const q={page:"",placements:[]},B=e=>{return t=void 0,n=void 0,o=function*(){if(!e.publisherId)return console.log("PublisherId not found in getlayoutConfig."),q;try{if(window.ADS_CONFIG_MOCK&&"prd"!==j.PRD)return window.ADS_CONFIG_MOCK;const t={view:e.page,version:e.version||"1.0.0",publisher:e.publisherId},n=L(t),r=`https://ads-query.luizalabs.com/configs/${e.channel}?${n}`,o=yield f(r),{configuration:i}=yield o.json();return i}catch(t){return b({errorMessage:"getlayoutConfig",originAction:s.GET_CONFIG,sdkContext:e,error:t}),l.notify({error:t}),q}},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}c((o=o.apply(t,n||[])).next())}));var t,n,r,o},G=e=>{const t={};return e.forEach((e=>{t[e.type]||(t[e.type]=[]),t[e.type].push(e)})),t},W=e=>e.reduce(((e,t)=>e+t.numberOfAds),0),z=()=>{const e=new Uint32Array(2);return`${Date.now()}${window.crypto.getRandomValues(e).join("")}`};const H=e=>e.map((e=>({category:e.category,subCategory:e.subCategory,brand:e.brand,gender:e.gender,adId:e.adId,campaignId:e.campaignId,sku:e.sku,sellerId:e.sellerId,productName:e.name}))),U=(e,t,n)=>{return r=void 0,o=void 0,a=function*(){try{const r=((e,t)=>{const n=Object.assign({},e);return t.page===S.SHOWCASE&&(n.referenceProduct={sku:t.sku,name:t.name,sellerId:t.seller,category:t.category,subCategory:t.subCategory,brand:t.brand,gender:t.genders[0]||""}),t.searchTerm?n.searchTerm=t.searchTerm:t.pageUri&&(n.pageUri=t.pageUri),n})({adRequestId:n.adRequestId,adResponseId:n.adResponseId,adType:n.adType,adsRequestedCount:n.adsRequestedCount,adsReturnedCount:n.adsReturnedCount,publisherId:e.publisherId,channel:e.channel,page:e.page,ads:H(t),zipCode:p(e.zipcode,!1),adsMatchReason:n.matchReason},e),o="https://ads-collector.luizalabs.com/api/v1/fillrate",i={method:"POST",body:r,headers:{"Content-type":"application/json"}};yield f(o,i)}catch(r){b({errorMessage:"sendFillrateEvent",originAction:s.FILLRATE,sdkContext:e,ads:t,details:{adsProps:n},error:r}),l.notify({error:r})}},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,s)}c((a=a.apply(r,o||[])).next())}));var r,o,i,a},$=e=>{if(!e)return"";let t=e;return t=t.replace(/ /g,"-"),t=t.toLowerCase(),t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,""),t};const J=(e,t,n)=>{return r=void 0,o=void 0,a=function*(){try{if(window.ADS_ITEMS_MOCK&&"prd"!==j.PRD)return window.ADS_ITEMS_MOCK;const r=z(),o={adRequestId:r,publisherId:e.publisherId,channel:e.channel},i={sku:e.sku,name:$(e.name),category:$(e.category),subCategory:$(e.subCategory),brand:$(e.brand),type:t,slots:n,zipCode:p(e.zipcode,!1),userId:e.userId,seller:e.seller,gender:1===e.genders.length?$(e.genders[0]):null},s=`https://ads-query.luizalabs.com/sponsored/tags?${L(i)}`,a=yield f(s,{headers:o}),c=a.headers.get("Adresponseid")||"",d=a.headers.get("matchReason")||"",u=yield a.json(),l={adRequestId:r,adResponseId:c,adType:t,matchReason:d,adsRequestedCount:n,adsReturnedCount:u.length};return U(e,u,l),((e,t,n)=>e.map((e=>Object.assign(Object.assign({},e),{adRequestId:t,adResponseId:n}))))(u,r,c)}catch(r){return b({errorMessage:"getAdsByContext",originAction:s.GET_ADS,sdkContext:e,details:{adType:t,slots:n},error:r}),l.notify({error:r}),[]}},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,s)}c((a=a.apply(r,o||[])).next())}));var r,o,i,a};const Y=(e,t,n)=>{return r=void 0,o=void 0,a=function*(){try{if(window.ADS_ITEMS_MOCK&&"prd"!==j.PRD)return window.ADS_ITEMS_MOCK;const r=z(),o={adRequestId:r,publisherId:e.publisherId,channel:e.channel,"Content-Type":"application/json"},i=((e,t)=>{const{zipcode:n,skusOnPage:r=[],items:o}=e,i={slots:t,page:e.page,zipCode:p(n,!1),skusOnPage:r};return o&&o.length&&(i.items=(e=>e.reduce(((e,t)=>(t.category&&e.push(Object.assign(Object.assign({},t),{category:$(t.category),subCategory:t.subCategory&&$(t.subCategory),brand:t.brand&&$(t.brand),name:t.name&&$(t.name)})),e)),[]))(o)),i})(e,n),s="https://ads-query.luizalabs.com/ads/best",a={method:"POST",headers:o,body:i},c=yield f(s,a),d=c.headers.get("Adresponseid")||"",u=c.headers.get("matchReason")||"",l=yield c.json(),v={adRequestId:r,adResponseId:d,adType:t,matchReason:u,adsRequestedCount:n,adsReturnedCount:l.length};return U(e,l,v),((e,t,n)=>e.map((e=>Object.assign(Object.assign({},e),{adRequestId:t,adResponseId:n}))))(l,r,d)}catch(r){return b({errorMessage:"getAdsBestByContext",originAction:s.GET_ADS,sdkContext:e,details:{adType:t,slots:n},error:r}),l.notify({error:r}),[]}},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,s)}c((a=a.apply(r,o||[])).next())}));var r,o,i,a};var Q=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};window.magaluAds=new class{init(e){return Q(this,void 0,void 0,(function*(){if(e.publisherId)try{const t=yield B(e),n=G(t.placements);Object.keys(n).map((t=>Q(this,void 0,void 0,(function*(){const r=n[t],o=W(r),i=yield J(e,t,o);i.length&&K.execute(e,i,r)}))))}catch(t){b({errorMessage:"MagaluAds:init",originAction:s.INIT,sdkContext:e,error:t}),l.notify({error:t})}else console.log("PublisherId not found on init.")}))}initBest(e){return Q(this,void 0,void 0,(function*(){if(e.publisherId)try{const t=yield B(e),n=G(t.placements);Object.keys(n).map((t=>Q(this,void 0,void 0,(function*(){const r=n[t],o=W(r),i=yield Y(e,t,o);i.length&&K.execute(e,i,r)}))))}catch(t){b({errorMessage:"MagaluAds:init",originAction:s.INIT,sdkContext:e,error:t}),l.notify({error:t})}else console.log("PublisherId not found on initBest.")}))}afterRenderAd(e){N.subscribe(e)}afterInsertSlot(e){F.subscribe(e)}onError(e){l.subscribe(e)}onAdView(e){u.subscribe(e)}onAdClick(e){T.subscribe(e)}},window.document.dispatchEvent(new CustomEvent(v.SDK))}();