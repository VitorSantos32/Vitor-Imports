!function(){"use strict";var e,t;!function(e){e.DESKTOP="DESKTOP",e.MOBILE_SITE="MOBILE_SITE",e.APP_ANDROID="APP_ANDROID",e.APP_IOS="APP_IOS"}(e||(e={})),function(e){e.HOME="HOME",e.LIST_PRODUCT="LIST_PRODUCT",e.SEARCH="SEARCH",e.DETAIL_PAGE_VIEW="DETAIL_PAGE_VIEW",e.CART="CART",e.LOGIN="LOGIN",e.CUSTOMER_AREA="CUSTOMER_AREA",e.CHECKOUT="CHECKOUT",e.BLOG="BLOG",e.LANDING_PAGE="LANDING_PAGE",e.OTHERS="OTHERS",e.WISHLIST="WISHLIST"}(t||(t={}));var n=new class{constructor(){this.mobileRE=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|redmi|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,this.notMobileRE=/CrOS/,this.tabletRE=/android|ipad|playbook|silk/i,this.MAX_LENGTH_UA=500,this.MOBILE_WIDTH_MAX_LENGTH=768}execute(){const t=navigator.userAgent,n=this.normalizeUa(t),i=this.isMobileBasedOnUA(n),s=this.isTabletBasedOnUA(n),o=this.isMobileBasedOnScreen(window.innerWidth);return s||o||i?e.MOBILE_SITE:e.DESKTOP}isTabletBasedOnUA(e){return this.tabletRE.test(e)}isMobileBasedOnUA(e){return!this.notMobileRE.test(e)&&this.mobileRE.test(e)}isMobileBasedOnScreen(e){return e<this.MOBILE_WIDTH_MAX_LENGTH}normalizeUa(e){return e.substring(0,this.MAX_LENGTH_UA)}},i=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function r(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}c((i=i.apply(e,t||[])).next())}))},s=new class{fetchRequest(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(e,t);if(!n.ok)throw new Error(`Request failed with status ${n.status}`);return n}))}get(e,t){return i(this,void 0,void 0,(function*(){return this.fetchRequest(e,{method:"GET",headers:t})}))}post(e,t,n){return i(this,void 0,void 0,(function*(){return this.fetchRequest(e,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},n),body:JSON.stringify(t)})}))}},o=new class{getCookie(e){const t=document.cookie.split(";");for(let n=0;n<t.length;n++){const i=t[n].trim();if(i.startsWith(e+"="))return i.substring(e.length+1)}return null}};const a=e=>({campaign:e||"",zipcodeState:o.getCookie("uf")||"",zipcodeCity:o.getCookie("city")||""});var r,c=new class{constructor(){this._EVENTS_PATH_MAP={home:"/api/events/home",search:"/api/events/search",pdp:"/api/events/pdp",categories:"/api/events/categories",order:"/api/events/order","cart-view":"/api/events/cart-view","add-cart":"/api/events/add-cart","wishlist-view":"/api/events/wishlist-view","blog-view":"/api/events/blog-view","login-view":"/api/events/login-view","customer-area-view":"/api/events/customer-area-view","landing-page-view":"/api/events/landing-page","showcase-view":"/api/events/showcase-view","shipping-calculation":"/api/events/shipping-calculation"}}execute(e,t,i){return o=this,r=void 0,h=function*(){try{const o=Object.assign({},i),r=this._EVENTS_PATH_MAP[e];if("string"==typeof r){const e=Object.assign(Object.assign({},o),t),i=a(e.campaign);e.sessionInfo&&!e.sessionInfo.device&&(e.sessionInfo.device=n.execute()),yield s.post(r,e,i)}}catch(t){console.error(`GenericEvents::${e}`,t)}},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{s(h.next(e))}catch(e){t(e)}}function i(e){try{s(h.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):(s=t.value,s instanceof c?s:new c((function(e){e(s)}))).then(n,i)}s((h=h.apply(o,r||[])).next())}));var o,r,c,h}},h=new class{constructor(){this._REFRESH_SESSION_EVENT_PATH="/api/events/refresh-session"}execute(e,t){return i=this,o=void 0,c=function*(){try{const i=a(e.campaign),o=Object.assign(Object.assign({},e),{runningMode:t});o.sessionInfo&&!o.sessionInfo.device&&(o.sessionInfo.device=n.execute()),yield s.post(this._REFRESH_SESSION_EVENT_PATH,o,i)}catch(e){console.error("RefreshSession::execute",e)}},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{a(c.next(e))}catch(e){t(e)}}function s(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,s)}a((c=c.apply(i,o||[])).next())}));var i,o,r,c}},d=new class{constructor(e){this.store=e}saveData(e){return this.store.saveData(e)}getData(){return this.store.getData()}}(new class{constructor(){this.dataLayer={}}saveData(e){return this.dataLayer=Object.assign(Object.assign({},this.dataLayer),e),this.dataLayer}getData(){return this.dataLayer}});class u{constructor(e){this.callback=e,this.observe()}observe(){const e=new Proxy(window.freedomDL,{set:(e,t,n)=>(e[t]=n,"length"!==t&&this.callback(n),!0)});window.freedomDL=e}}!function(e){e.BACKGROUND="BACKGROUND",e.FOREGROUND="FOREGROUND"}(r||(r={}));var l=new class{constructor(){this._TWO_MINUTES_IN_MILI=12e4}init(e){this.getDataAndSendEvent(e),setInterval((()=>{this.getDataAndSendEvent(e)}),this._TWO_MINUTES_IN_MILI)}checkDataLayer(e){return!(!e.visitorId||!e.page)}getDataAndSendEvent(e){const t=d.getData();this.checkDataLayer(t)&&e(t,document.hidden?r.BACKGROUND:r.FOREGROUND)}},v=new class{constructor(){this.botRegexLiteral=/bot|AdsBot-Google-Mobile|Google-AdWords|GeedoProductSearch|crawl|sofist|spider|slurp|bingbot|googlebot|yahoo|duckduckbot|baiduspider|Mediapartners|admantx|integralads|facebookexternalhit|Google-Read-Aloud|AdsBot-Google|MetaInspector|YandexBot|TelegramBot|SemrushBot|AdSet-Google|meta-externalagent|Python|mota-externaalagent|WhatsApp|GoogleOther|ChatGPT-User|Swiftfox|axios|CCBot|Yowser|SirdataBot/i}_checkUserAgent(){var e;const t=(null===(e=navigator.userAgent)||void 0===e?void 0:e.toLowerCase())||"";return!!t&&this.botRegexLiteral.test(t)}_checkWebDriver(){return!0===navigator.webdriver}_checkHeadlessBrowserHints(){var e;try{"function"==typeof(null===(e=navigator.permissions)||void 0===e?void 0:e.query)&&navigator.permissions.query({name:"notifications"})}catch(e){return!0}return!1}_checkScreenDimensions(){var e,t;const n=(null===(e=window.screen)||void 0===e?void 0:e.width)||0,i=(null===(t=window.screen)||void 0===t?void 0:t.height)||0;return 0===n||0===i}_checkFeatureSupport(){return void 0===window.localStorage||void 0===window.sessionStorage}isBot(){return!!(this._checkWebDriver()||this._checkUserAgent()||this._checkHeadlessBrowserHints()||this._checkScreenDimensions()||this._checkFeatureSupport())}};new class{constructor(){this.checkOrGenerateDataLayer(),this.checkIsBot(),this.handlePreviousEvents(),new u(this.handleDataLayer),l.init(this.refreshSession)}checkIsBot(){const e=v.isBot();d.saveData({bot:e})}refreshSession(e,t){return n=this,i=void 0,o=function*(){try{h.execute(e,t)}catch(e){console.error("FreedomAnalytics:refreshSession",e)}},new((s=void 0)||(s=Promise))((function(e,t){function a(e){try{c(o.next(e))}catch(e){t(e)}}function r(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,r)}c((o=o.apply(n,i||[])).next())}));var n,i,s,o}checkOrGenerateDataLayer(){window.freedomDL||(window.freedomDL=[])}handlePreviousEvents(){window.freedomDL.forEach((e=>{this.handleDataLayer(e)}))}handleDataLayer(e){const{event:t}=e;if(t){const n=d.getData();c.execute(t,e,n)}else d.saveData(e)}}}();