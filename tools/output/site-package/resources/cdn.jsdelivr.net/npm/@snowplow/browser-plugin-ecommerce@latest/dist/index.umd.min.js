/*!
 * Ecommerce tracking for Snowplow v3.24.6 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

"use strict";!function(n,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((n="undefined"!=typeof globalThis?globalThis:n||self).snowplowEcommerce={})}(this,(function(n){function o(n,o,t){if(t||2===arguments.length)for(var e,r=0,c=o.length;r<c;r++)!e&&r in o||(e||(e=Array.prototype.slice.call(o,0,r)),e[r]=o[r]);return n.concat(e||Array.prototype.slice.call(o))}function t(){var n,o={},t=[],e=[],r=[],c=function(n,t){null!=t&&""!==t&&(o[n]=t)};return{add:c,addDict:function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&c(o,n[o])},addJson:function(n,o,r){var c;if(c=r)n:{if(null!=r&&(r.constructor==={}.constructor||r.constructor===[].constructor))for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){c=!0;break n}c=!1}c&&(n={keyIfEncoded:n,keyIfNotEncoded:o,json:r},e.push(n),t.push(n))},addContextEntity:function(n){r.push(n)},getPayload:function(){return o},getJson:function(){return t},withJsonProcessor:function(o){n=o},build:function(){return null==n||n(this,e,r),o}}}function e(n){var o=n.event;return n={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:n=o.schema,data:o.data}},(o=t()).add("e","ue"),o.addJson("ue_px","ue_pr",n),o}function r(n,o){void 0===o&&(o={});var t,e={};for(t in n)(o[t]||null!==n[t]&&void 0!==n[t])&&(e[t]=n[t]);return e}function c(n,o,t){try{var e=null!=n?n:Object.keys(o);n=[];for(var r=0;r<e.length;r++){var c=e[r];o.hasOwnProperty(c)?n.push(o[c]):d.warn(c+" not configured")}n.forEach(t)}catch(n){d.error("Function failed",n)}}var a,i;"function"==typeof SuppressedError&&SuppressedError,(i=a||(a={}))[i.none=0]="none",i[i.error=1]="error",i[i.warn=2]="warn",i[i.debug=3]="debug",i[i.info=4]="info";var d=function(n){return void 0===n&&(n=a.warn),{setLogLevel:function(o){n=a[o]?o:a.warn},warn:function(t,e){for(var r=[],c=2;c<arguments.length;c++)r[c-2]=arguments[c];n>=a.warn&&"undefined"!=typeof console&&(c="Snowplow: "+t,e?console.warn.apply(console,o([c+"\n",e],r,!1)):console.warn.apply(console,o([c],r,!1)))},error:function(t,e){for(var r=[],c=2;c<arguments.length;c++)r[c-2]=arguments[c];n>=a.error&&"undefined"!=typeof console&&(c="Snowplow: "+t+"\n",e?console.error.apply(console,o([c+"\n",e],r,!1)):console.error.apply(console,o([c],r,!1)))},debug:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];n>=a.debug&&"undefined"!=typeof console&&console.debug.apply(console,o(["Snowplow: "+t],e,!1))},info:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];n>=a.info&&"undefined"!=typeof console&&console.info.apply(console,o(["Snowplow: "+t],e,!1))}}}(),u={},s={};n.EcommercePlugin=function(){return{activateBrowserPlugin:function(n){u[n.id]=n,s[n.id]={items:[]}}}},n.addItem=function(n,o){void 0===o&&(o=Object.keys(u)),o.forEach((function(o){s[o]&&s[o].items.push(n)}))},n.addTrans=function(n,o){void 0===o&&(o=Object.keys(u)),o.forEach((function(o){s[o]&&(s[o].transaction=n)}))},n.trackAddToCart=function(n,o){void 0===o&&(o=Object.keys(u)),c(o,u,(function(o){var t=(o=o.core).track,c=e({event:{schema:"iglu:com.snowplowanalytics.snowplow/add_to_cart/jsonschema/1-0-0",data:r({sku:n.sku,quantity:n.quantity,name:n.name,category:n.category,unitPrice:n.unitPrice,currency:n.currency})}});t.call(o,c,n.context,n.timestamp)}))},n.trackRemoveFromCart=function(n,o){void 0===o&&(o=Object.keys(u)),c(o,u,(function(o){var t=(o=o.core).track,c=e({event:{schema:"iglu:com.snowplowanalytics.snowplow/remove_from_cart/jsonschema/1-0-0",data:r({sku:n.sku,quantity:n.quantity,name:n.name,category:n.category,unitPrice:n.unitPrice,currency:n.currency})}});t.call(o,c,n.context,n.timestamp)}))},n.trackTrans=function(n){void 0===n&&(n=Object.keys(u)),c(n,u,(function(n){var o=s[n.id].transaction;if(o){var e=n.core,r=e.track,c=o.orderId,a=o.total,i=o.affiliation,d=o.tax,u=o.shipping,l=o.city,f=o.state,p=o.country,y=o.currency,m=t();m.add("e","tr"),m.add("tr_id",c),m.add("tr_af",i),m.add("tr_tt",a),m.add("tr_tx",d),m.add("tr_sh",u),m.add("tr_ci",l),m.add("tr_st",f),m.add("tr_co",p),m.add("tr_cu",y),r.call(e,m,o.context,o.timestamp)}for(o=0;o<s[n.id].items.length;o++)e=s[n.id].items[o],c=(r=n.core).track,a=e.orderId,i=e.sku,d=e.price,u=e.name,l=e.category,f=e.quantity,p=e.currency,(y=t()).add("e","ti"),y.add("ti_id",a),y.add("ti_sk",i),y.add("ti_nm",u),y.add("ti_ca",l),y.add("ti_pr",d),y.add("ti_qu",f),y.add("ti_cu",p),c.call(r,y,e.context,e.timestamp);s[n.id]={items:[]}}))},Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
