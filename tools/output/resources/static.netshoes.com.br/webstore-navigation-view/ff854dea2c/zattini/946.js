"use strict";(self.webpackChunkff_webstore_navigation_view=self.webpackChunkff_webstore_navigation_view||[]).push([[946],{8946:function(t,e,o){o.r(e),o.d(e,{default:function(){return C}});var i=o(5353),n=o(8296),r=o.n(n),s=o(6943),a=o(313),c=o(3170);const p=(t,e)=>{(0,c.A)("isWebview")?(0,a.tP)(t,e):window.dataLayer&&window.dataLayer.push({event:t,offer:e})},u={methods:{viewOfferEvent:t=>{p("view_offer",t)},selectOfferEvent:t=>{p("select_offer",t)}}};var l={components:{Button:r()},props:{title:{type:String,required:!0},description:{type:String,required:!0},link:{type:String,required:!0},amount:{type:Number,required:!0},promotionUnit:{type:String,required:!0},targetValue:{type:Number,default:null},targetValueComparator:{type:String,default:null},couponCode:{type:String,default:null},promotionId:{type:String,default:null},promotionType:{type:String,default:null}},data(){return{isCopied:!1,countdownInterval:null,copyCount:-1}},mixins:[u],mounted(){this.intersectionObserver=new IntersectionObserver(this.observerCard,{threshold:.6}),this.intersectionObserver.observe(this.$el)},computed:{...(0,i.mapState)("Config",["isWebview"]),isGiftPromotion(){return"CART_GIFT"===this.promotionType},cardValueByType(){if(this.isGiftPromotion)return this.$t("offers.couponpage.discount.value.gift");let t=this.amount.toString();return"NOMINAL_PRICE"===this.promotionUnit&&(t=this.amount.toString().slice(0,-2)),this.$t(`offers.couponpage.discount.value.${this.promotionUnit}`,{value:t})},targetLabel(){return this.targetValue&&this.targetValueComparator?this.$t(`offers.couponpage.target.${this.targetValueComparator}`,{targetValue:this.$n(this.targetValue)}):null},couponDependentLabels(){const t=this.formatCouponTag(),e={};return["button","cta"].forEach(o=>{e[o]=this.$t(`offers.couponpage.${o}.${t}`)}),this.isWebview&&this.couponCode&&(e.button=this.$t("offers.couponpage.button.withcoupon.webview")),e}},methods:{redirectToOfferLink(){if(this.isWebview&&window.FreedomAppSDK){const t=new window.FreedomAppSDK,e=this.convertLinkWebView();return void t.callService({serviceName:"navigationTo",parameters:{path:e}})}window.location.href=this.link},onButtonClick(){this.selectOfferEvent(this.formatDataGTM()),this.couponCode&&!this.isWebview?(navigator.clipboard.writeText(this.couponCode),this.isCopied=!0,this.copyCount=5,this.countdownInterval=setInterval(()=>{this.copyCount-=1,0===this.copyCount&&(clearInterval(this.countdownInterval),this.redirectToOfferLink())},1e3)):this.redirectToOfferLink()},formatCouponTag(){return this.couponCode?this.isCopied&&!this.isWebview?"withcoupon.copied":"withcoupon":"nocoupon"},convertLinkWebView(){if(this.link.includes("/lst/"))return this.link.replace("lst","l");const t=this.getSKUFromLink();if(t){const e=this.link.split("?");return`/p/${t}${e&&e[1]?`?${e[1]}`:""}`}return this.link},getSKUFromLink(){const t=this.link.match(/(([0-9A-Z]{3})(-[0-9A-Z]{3,4})(-[0-9A-Z]{3})(-[0-9A-Z]{2})(-[0-9A-Z]{2})|([0-9A-Z]{3})(-[0-9A-Z]{3,4})(-[0-9A-Z]{3})(-[0-9A-Z]{2})|([0-9A-Z]{3})(-[0-9A-Z]{3,4})(-[0-9A-Z]{3})(-[0-9A-Z]{6})(-[0-9A-Z]{2})|([0-9A-Z]{3})(-[0-9A-Z]{3,4})(-[0-9A-Z]{3})|([0-9A-Z]{3})(-[0-9A-Z]{3,4}))/g);return t?t[0]:null},observerCard(t){t.forEach(t=>{t.isIntersecting&&(this.viewOfferEvent(this.formatDataGTM()),this.intersectionObserver.unobserve(t.target))})},formatDataGTM(){return{title:this.title,coupon_code:this.couponCode,promotion_id:this.promotionId,link:this.link}}}},f=o(4486),d=(0,f.A)(l,function(){var t=this,e=t._self._c;return e("div",{staticClass:"offer-card"},[e("div",{staticClass:"offer-card__content"},[e("div",{staticClass:"offer-card__data-wrapper"},[e("div",{staticClass:"offer-card__info-wrapper"},[e("div",{staticClass:"offer-card__discount"},[e("span",{staticClass:"offer-card__discount__value",class:{"offer-card__discount__value--gift":t.isGiftPromotion}},[t._v("\n            "+t._s(t.cardValueByType)+"\n          ")]),t._v(" "),t.isGiftPromotion?t._e():e("span",{staticClass:"offer-card__discount__label"},[t._v("\n            "+t._s(t.$t("offers.couponpage.discount.label"))+"\n          ")])]),t._v(" "),e("div",{staticClass:"offer-card__info"},[e("div",{staticClass:"offer-card__info__title"},[t._v("\n            "+t._s(t.title)+"\n          ")]),t._v(" "),t.targetLabel?e("div",{staticClass:"offer-card__info__target"},[t._v("\n            "+t._s(t.targetLabel)+"\n          ")]):t._e()])]),t._v(" "),e("div",{staticClass:"offer-card__actions"},[t.isCopied&&!t.isWebview?e("div",[e("div",{staticClass:"offer-card__actions__copy-success"},[t._v("\n            "+t._s(t.$t("offers.couponpage.copied"))+"\n          ")]),t._v(" "),e("div",{staticClass:"offer-card__actions__countdown"},[t._v("\n            "+t._s(t.$t("offers.couponpage.countdown.label"))+"\n            "),e("b",[t._v(t._s(t.$t("offers.couponpage.countdown.count",{count:t.copyCount})))])])]):e("div",[t.couponCode?e("div",{staticClass:"offer-card__actions__coupon"},[t._v("\n            "+t._s(t.couponCode)+"\n          ")]):t._e(),t._v(" "),e("Button",{attrs:{label:t.couponDependentLabels.button,appearance:"secondary"},on:{click:t.onButtonClick}})],1),t._v(" "),e("div",{staticClass:"offer-card__actions__cta"},[t._v("\n          "+t._s(t.couponDependentLabels.cta)+"\n        ")])])]),t._v(" "),e("div",{staticClass:"offer-card__description"},[t._v("\n      "+t._s(t.description)+"\n    ")])])])},[],!1,null,"73f9befe",null).exports,_={components:{OfferCard:s.OfferCardStore||d},computed:{...(0,i.mapState)("CouponPage",["hasOffer","offers"])}},v=(0,f.A)(_,function(){var t=this,e=t._self._c;return e("div",t._l(t.offers,function(t){return e("OfferCard",{key:t.uuid,attrs:{title:t.title,link:t.link,amount:t.promotion.amount,"promotion-unit":t.promotion.promotionUnit,"target-value":t.promotion.targetValue,"target-value-comparator":t.promotion.targetValueComparator,"coupon-code":t.promotion.couponCode,description:t.description,"promotion-id":t.promotion?t.promotion.uuid:null,"promotion-type":t.promotion.promotionType}})}),1)},[],!1,null,null,null).exports,h={components:{Button:r(),OfferCardList:v},computed:{...(0,i.mapState)("CouponPage",["offers","h1","description"]),...(0,i.mapState)("Config",["isWebview"])},methods:{backToHome(){this.isWebview&&window.FreedomAppSDK?(new window.FreedomAppSDK).callService({serviceName:"navigationTo",parameters:{path:"/"}}):window.location.href="/"}}},C=(0,f.A)(h,function(){var t=this,e=t._self._c;return e("div",{staticClass:"coupon-page breakpoint"},[t.isWebview?t._e():e("h1",{staticClass:"coupon-page__title"},[t._v(t._s(t.h1))]),t._v(" "),t.offers.length?e("p",{staticClass:"coupon-page__description"},[t._v(t._s(t.description))]):t._e(),t._v(" "),t.offers.length?e("OfferCardList"):e("div",{staticClass:"coupon-empty"},[e("div",{staticClass:"coupon-empty__content"},[e("svg",{staticClass:"coupon-empty__icon",attrs:{width:"60",height:"48",viewBox:"0 0 60 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{id:"Vector",d:"M38.4 12L42 15.6L21.6 36L18 32.4L38.4 12ZM6 0H54C57.33 0 60 2.67 60 6V18C56.7 18 54 20.7 54 24C54 27.33 56.7 30 60 30V42C60 45.33 57.33 48 54 48H6C2.7 48 0 45.33 0 42V30C3.33 30 6 27.33 6 24C6 20.7 3.33 18 0 18V6C0 2.67 2.7 0 6 0ZM6 6V13.62C9.72 15.78 12 19.71 12 24C12 28.29 9.72 32.25 6 34.38V42H54V34.38C50.28 32.25 48 28.29 48 24C48 19.71 50.28 15.78 54 13.62V6H6ZM22.5 12C24.99 12 27 14.01 27 16.5C27 18.99 24.99 21 22.5 21C20.01 21 18 18.99 18 16.5C18 14.01 20.01 12 22.5 12ZM37.5 27C39.99 27 42 29.01 42 31.5C42 33.99 39.99 36 37.5 36C35.01 36 33 33.99 33 31.5C33 29.01 35.01 27 37.5 27Z",fill:"currentColor"}})]),t._v(" "),e("h2",{staticClass:"coupon-empty__title"},[t._v(t._s(t.$t("couponpage.empty.title")))]),t._v(" "),e("p",{staticClass:"coupon-empty__text"},[t._v(t._s(t.$t("couponpage.empty.text")))]),t._v(" "),e("div",{staticClass:"coupon-empty__controller"},[e("Button",{attrs:{appearance:"secondary",label:"Voltar para a p√°gina inicial","button-event":t.backToHome}})],1)])])],1)},[],!1,null,"565b3ce0",null).exports}}]);